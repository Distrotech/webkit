2007-01-29  Anders Carlsson  <acarlsson@apple.com>

        Reviewed by Darin and Geoff.

        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.cpp:
        (initialize):
        Call OleInitialize.
        
        (runTest):
        Use CF for creating the URLs passed in.
        
        (initializePreferences):
        Don't autosave the preferences.
        
        (main):
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.vcproj:
        Link with CF.

2007-01-29  Anders Carlsson  <acarlsson@apple.com>

        Build fix.
        
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/WaitUntilDoneDelegate.h:
        (WaitUntilDoneDelegate::dragDestinationActionMaskForDraggingInfo):
        (WaitUntilDoneDelegate::willPerformDragDestinationAction):

2007-01-18  Anders Carlsson  <acarlsson@apple.com>

        Reviewed by Adam.

        Major cleanups and bugfixes, such as:
        
        Update for changes to the API.
        Implement a timer which prevents test from hanging indefinitely.
        Fix bugs which would cause the same test result to be dumped twice.
        
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.cpp:
        (DumpRenderTreeWndProc):
        Handle timer.
        
        (initialize):
        Initialize CoreGraphics so we get fonts.
        (runTest):
        Add timer.
        
        (initializePreferences):
        Turn off Java and Plug-ins.
        
        (main):
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.h:
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.vcproj:
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/LayoutTestController.cpp:
        (waitUntilDoneCallback):
        (notifyDoneCallback):
        Fix bug where dump could be called twice.
        
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/WaitUntilDoneDelegate.cpp:
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/WaitUntilDoneDelegate.h:
        Fix newlines, update for new API.

2006-11-07  Anders Carlsson  <acarlsson@apple.com>

        Reviewed by Geoff.
        
        Fix the build. Hook up a layoutTestController and implement dumpAsText, waitUntilDone and notifyDone.

        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.cpp:
        (dump):
        (main):
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.h: Added.
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.vcproj:
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/LayoutTestController.cpp: Added.
        (dumpAsTextCallback):
        (waitUntilDoneCallback):
        (notifyDoneCallback):
        (getClass):
        (createLayoutTestController):
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/LayoutTestController.h: Added.
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/WaitUntilDoneDelegate.cpp:
        (WaitUntilDoneDelegate::didFinishLoadForFrame):
        (WaitUntilDoneDelegate::windowScriptObjectAvailable):
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/WaitUntilDoneDelegate.h:
        (WaitUntilDoneDelegate::didReceiveServerRedirectForProvisionalLoadForFrame):
        (WaitUntilDoneDelegate::didFailProvisionalLoadWithError):
        (WaitUntilDoneDelegate::didCommitLoadForFrame):
        (WaitUntilDoneDelegate::didReceiveIcon):
        (WaitUntilDoneDelegate::didFailLoadWithError):
        (WaitUntilDoneDelegate::didChangeLocationWithinPageForFrame):
        (WaitUntilDoneDelegate::willPerformClientRedirectToURL):
        (WaitUntilDoneDelegate::didCancelClientRedirectForFrame):
        (WaitUntilDoneDelegate::willCloseFrame):
        (WaitUntilDoneDelegate::createWebViewWithRequest):
        (WaitUntilDoneDelegate::webViewShow):
        (WaitUntilDoneDelegate::webViewClose):
        (WaitUntilDoneDelegate::webViewFocus):
        (WaitUntilDoneDelegate::webViewUnfocus):
        (WaitUntilDoneDelegate::webViewFirstResponder):
        (WaitUntilDoneDelegate::makeFirstResponder):
        (WaitUntilDoneDelegate::setStatusText):
        (WaitUntilDoneDelegate::webViewStatusText):
        (WaitUntilDoneDelegate::webViewAreToolbarsVisible):
        (WaitUntilDoneDelegate::setToolbarsVisible):
        (WaitUntilDoneDelegate::webViewIsStatusBarVisible):
        (WaitUntilDoneDelegate::setStatusBarVisible):
        (WaitUntilDoneDelegate::webViewIsResizable):
        (WaitUntilDoneDelegate::setResizable):
        (WaitUntilDoneDelegate::setFrame):
        (WaitUntilDoneDelegate::webViewFrame):
        (WaitUntilDoneDelegate::setContentRect):
        (WaitUntilDoneDelegate::webViewContentRect):
        (WaitUntilDoneDelegate::runJavaScriptConfirmPanelWithMessage):
        (WaitUntilDoneDelegate::runJavaScriptTextInputPanelWithPrompt):
        (WaitUntilDoneDelegate::runOpenPanelForFileButtonWithResultListener):
        (WaitUntilDoneDelegate::mouseDidMoveOverElement):
        (WaitUntilDoneDelegate::contextMenuItemsForElement):
        (WaitUntilDoneDelegate::validateUserInterfaceItem):
        (WaitUntilDoneDelegate::shouldPerformAction):
        (WaitUntilDoneDelegate::dragDestinationActionMaskForDraggingInfo):
        (WaitUntilDoneDelegate::willPerformDragDestinationAction):
        (WaitUntilDoneDelegate::dragSourceActionMaskForPoint):
        (WaitUntilDoneDelegate::willPerformDragSourceAction):

2006-10-06  Anders Carlsson  <acarlsson@apple.com>

        Reviewed by Maciej.

        Land new version of DumpRenderTree that uses the WebKit APIs.
        
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.cpp:
        (initialize):
        (dump):
        (runTest):
        (main):
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/DumpRenderTree.vcproj:
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/WaitUntilDoneDelegate.cpp: Added.
        (WaitUntilDoneDelegate::QueryInterface):
        (WaitUntilDoneDelegate::AddRef):
        (WaitUntilDoneDelegate::Release):
        (WaitUntilDoneDelegate::didStartProvisionalLoadForFrame):
        (WaitUntilDoneDelegate::didReceiveTitle):
        (WaitUntilDoneDelegate::didFinishLoadForFrame):
        (WaitUntilDoneDelegate::runJavaScriptAlertPanelWithMessage):
        (WaitUntilDoneDelegate::windowScriptObjectAvailable):
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/WaitUntilDoneDelegate.h: Added.
        (WaitUntilDoneDelegate::WaitUntilDoneDelegate):
        (WaitUntilDoneDelegate::didReceiveServerRedirectForProvisionalLoadForFrame):
        (WaitUntilDoneDelegate::didFailProvisionalLoadWithError):
        (WaitUntilDoneDelegate::didCommitLoadForFrame):
        (WaitUntilDoneDelegate::didReceiveIcon):
        (WaitUntilDoneDelegate::didFailLoadWithError):
        (WaitUntilDoneDelegate::didChangeLocationWithinPageForFrame):
        (WaitUntilDoneDelegate::willPerformClientRedirectToURL):
        (WaitUntilDoneDelegate::didCancelClientRedirectForFrame):
        (WaitUntilDoneDelegate::willCloseFrame):
        (WaitUntilDoneDelegate::createWebViewWithRequest):
        (WaitUntilDoneDelegate::webViewShow):
        (WaitUntilDoneDelegate::webViewClose):
        (WaitUntilDoneDelegate::webViewFocus):
        (WaitUntilDoneDelegate::webViewUnfocus):
        (WaitUntilDoneDelegate::webViewFirstResponder):
        (WaitUntilDoneDelegate::makeFirstResponder):
        (WaitUntilDoneDelegate::setStatusText):
        (WaitUntilDoneDelegate::webViewStatusText):
        (WaitUntilDoneDelegate::webViewAreToolbarsVisible):
        (WaitUntilDoneDelegate::setToolbarsVisible):
        (WaitUntilDoneDelegate::webViewIsStatusBarVisible):
        (WaitUntilDoneDelegate::setStatusBarVisible):
        (WaitUntilDoneDelegate::webViewIsResizable):
        (WaitUntilDoneDelegate::setResizable):
        (WaitUntilDoneDelegate::setFrame):
        (WaitUntilDoneDelegate::webViewFrame):
        (WaitUntilDoneDelegate::setContentRect):
        (WaitUntilDoneDelegate::webViewContentRect):
        (WaitUntilDoneDelegate::runJavaScriptConfirmPanelWithMessage):
        (WaitUntilDoneDelegate::runJavaScriptTextInputPanelWithPrompt):
        (WaitUntilDoneDelegate::runOpenPanelForFileButtonWithResultListener):
        (WaitUntilDoneDelegate::mouseDidMoveOverElement):
        (WaitUntilDoneDelegate::contextMenuItemsForElement):
        (WaitUntilDoneDelegate::validateUserInterfaceItem):
        (WaitUntilDoneDelegate::shouldPerformAction):
        (WaitUntilDoneDelegate::dragDestinationActionMaskForDraggingInfo):
        (WaitUntilDoneDelegate::willPerformDragDestinationAction):
        (WaitUntilDoneDelegate::dragSourceActionMaskForPoint):
        (WaitUntilDoneDelegate::willPerformDragSourceAction):
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/debug.vsprops: Added.
        * DumpRenderTree/DumpRenderTree.vcproj/DumpRenderTree/release.vsprops: Added.

