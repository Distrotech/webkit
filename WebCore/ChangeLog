2006-08-18  Anders Carlsson  <acarlsson@apple.com>

        * plugins/win/PluginViewWin.cpp:
        (WebCore::PluginViewWin::write):
        (WebCore::PluginViewWin::destroyStream):
        Another attempt at fixing the build. Make these two functions into instance methods of PluginViewWin.

2006-08-18  Anders Carlsson  <acarlsson@apple.com>

        * plugins/win/PluginViewWin.cpp:
        (WebCore::write):
        (WebCore::destroyStream):
        * plugins/win/PluginViewWin.h:
        Fix build by removing unneeded parameters.

2006-08-18  Anders Carlsson  <acarlsson@apple.com>

        Reviewed by Adele.

        Have the NPN functions call into the plugin view. Implement some of the plugin view methods.

        * plugins/win/PluginViewWin.cpp:
        (WebCore::PluginViewWin::start):
        (WebCore::PluginViewWin::setCurrentPluginView):
        (WebCore::PluginViewWin::currentPluginView):
        (WebCore::PluginViewWin::getURLNotify):
        (WebCore::PluginViewWin::getURL):
        (WebCore::PluginViewWin::postURLNotify):
        (WebCore::PluginViewWin::postURL):
        (WebCore::PluginViewWin::newStream):
        (WebCore::write):
        (WebCore::destroyStream):
        (WebCore::PluginViewWin::userAgent):
        (WebCore::PluginViewWin::status):
        (WebCore::PluginViewWin::getValue):
        (WebCore::PluginViewWin::setValue):
        (WebCore::PluginViewWin::~PluginViewWin):
        (WebCore::PluginViewWin::PluginViewWin):
        * plugins/win/PluginViewWin.h:
        * plugins/win/npapi.cpp:
        (pluginViewForInstance):
        (NPN_ReloadPlugins):
        (NPN_GetURLNotify):
        (NPN_GetURL):
        (NPN_PostURLNotify):
        (NPN_PostURL):
        (NPN_NewStream):
        (NPN_Write):
        (NPN_DestroyStream):
        (NPN_UserAgent):
        (NPN_Status):
        (NPN_GetValue):
        (NPN_SetValue):

2006-08-17  Anders Carlsson  <acarlsson@apple.com>

        Reviewed by Steve and Maciej.

        Add initial implementation of plugin view.

        * WebCore.vcproj/WebCore.vcproj:
        Add files.
        
        * bridge/win/FrameWin.cpp:
        (WebCore::FrameWin::objectContentType):
        (WebCore::FrameWin::createPlugin):
        Implement these functions.
        
        * platform/win/TemporaryLinkStubs.cpp:
        Remove implemented functions.
        
        * platform/win/WidgetWin.cpp: Add this file from the open source repo
        (WebCore::Widget::~Widget):
        Call DestroyWindow on the hWnd.
        
        * plugins/win/PluginDatabaseWin.cpp:
        (WebCore::PluginDatabaseWin::createPluginView):
        New function which creates a plugin view.
        
        * plugins/win/PluginDatabaseWin.h:
        
        * plugins/win/PluginPackageWin.cpp:
        (WebCore::PluginPackageWin::load):
        Assign the browser functions. They are just stubs for now.
               
        * plugins/win/PluginViewWin.cpp: Added.
        (WebCore::registerPluginView):
        (WebCore::PluginViewWndProc):
        (WebCore::PluginViewWin::invokeSetWindow):
        (WebCore::PluginViewWin::start):
        (WebCore::PluginViewWin::stop):
        (WebCore::createUTF8String):
        (WebCore::createUTF8StringArray):
        (WebCore::freeStringArray):
        (WebCore::PluginViewWin::~PluginViewWin):
        (WebCore::PluginViewWin::PluginViewWin):
        * plugins/win/PluginViewWin.h: Added.
        (WebCore::PluginViewWin::plugin):
        (WebCore::PluginViewWin::instance):
        * plugins/win/npapi.cpp: Added.
        (NPN_MemAlloc):
        (NPN_MemFree):
        (NPN_MemFlush):
        (NPN_ReloadPlugins):
        (NPN_RequestRead):
        (NPN_GetURLNotify):
        (NPN_GetURL):
        (NPN_PostURLNotify):
        (NPN_PostURL):
        (NPN_NewStream):
        (NPN_Write):
        (NPN_DestroyStream):
        (NPN_UserAgent):
        (NPN_Status):
        (NPN_InvalidateRect):
        (NPN_InvalidateRegion):
        (NPN_ForceRedraw):
        (NPN_GetValue):
        (NPN_SetValue):
        (NPN_GetJavaEnv):
        (NPN_GetJavaPeer):

2006-08-17  Anders Carlsson  <acarlsson@apple.com>

        Reviewed by Maciej.

        Add initial implementation of plugin database.
        
        * WebCore.vcproj/WebCore.vcproj:
        Add new files.
        
        * platform/win/TemporaryLinkStubs.cpp:
        Get rid of the PlugInInfoStore stubs.

        * plugins/win/PlugInInfoStoreWin.cpp: Added.
        (WebCore::PlugInInfoStore::createPluginInfoForPluginAtIndex):
        (WebCore::PlugInInfoStore::pluginCount):
        (WebCore::PlugInInfoStore::supportsMIMEType):
        (WebCore::refreshPlugins):
        * plugins/win/PluginDatabaseWin.cpp: Added.
        (WebCore::PluginDatabaseWin::installedPlugins):
        (WebCore::PluginDatabaseWin::refresh):
        (WebCore::PluginDatabaseWin::plugins):
        (WebCore::PluginDatabaseWin::getPluginsInPaths):
        (WebCore::PluginDatabaseWin::defaultPluginPaths):
        (WebCore::PluginDatabaseWin::isMIMETypeRegistered):
        (WebCore::PluginDatabaseWin::pluginForMIMEType):
        (WebCore::PluginDatabaseWin::pluginForExtension):
        * plugins/win/PluginDatabaseWin.h: Added.
        (WebCore::PluginDatabaseWin::setPluginPaths):
        * plugins/win/PluginPackageWin.cpp: Added.
        (WebCore::PluginPackageWin::~PluginPackageWin):
        (WebCore::getVersionInfo):
        (WebCore::splitString):
        (WebCore::PluginPackageWin::PluginPackageWin):
        (WebCore::PluginPackageWin::fetchInfo):
        (WebCore::PluginPackageWin::load):
        (WebCore::PluginPackageWin::unload):
        (WebCore::PluginPackageWin::unloadWithoutShutdown):
        (WebCore::PluginPackageWin::createPackage):
        (WebCore::PluginPackageWin::hash):
        (WebCore::PluginPackageWin::equal):
        * plugins/win/PluginPackageWin.h: Added.
        (WebCore::PluginPackageWin::name):
        (WebCore::PluginPackageWin::description):
        (WebCore::PluginPackageWin::fileName):
        (WebCore::PluginPackageWin::mimeToDescriptions):
        (WebCore::PluginPackageWin::mimeToExtensions):
        (WebCore::PluginPackageWin::pluginFuncs):
        (WebCore::PluginPackageWinHash::hash):
        (WebCore::PluginPackageWinHash::equal):
        (WTF::):
        * plugins/win/npfunctions.h: Added.

2006-08-17  Adam Roben  <aroben@apple.com>

        Removing this unintentionally added file.

        * rendering/RenderPopupMenuWin.cpp: Removed.

2006-08-17  Adam Roben  <aroben@apple.com>

        Reviewed by Steve.

        Branching files from OpenSource tree r15924 to prepare for <select>
        element implementation.

        * WebCore.vcproj/WebCore.vcproj:
        * rendering/RenderPopupMenuWin.h: Added.
        (WebCore::RenderPopupMenuWin::RenderPopupMenuWin):
        * rendering/RenderThemeWin.cpp: Added.
        (WebCore::theme):
        (WebCore::m_textFieldTheme):
        (WebCore::RenderThemeWin::~RenderThemeWin):
        (WebCore::RenderThemeWin::close):
        (WebCore::RenderThemeWin::platformActiveSelectionBackgroundColor):
        (WebCore::RenderThemeWin::platformInactiveSelectionBackgroundColor):
        (WebCore::RenderThemeWin::platformActiveSelectionForegroundColor):
        (WebCore::RenderThemeWin::platformInactiveSelectionForegroundColor):
        (WebCore::RenderThemeWin::addIntrinsicMargins):
        (WebCore::RenderThemeWin::supportsFocus):
        (WebCore::RenderThemeWin::determineState):
        (WebCore::RenderThemeWin::getThemeData):
        (WebCore::RenderThemeWin::adjustButtonStyle):
        (WebCore::prepareForDrawing):
        (WebCore::doneDrawing):
        (WebCore::RenderThemeWin::paintButton):
        (WebCore::RenderThemeWin::setCheckboxSize):
        (WebCore::RenderThemeWin::setRadioSize):
        (WebCore::RenderThemeWin::adjustTextFieldStyle):
        (WebCore::RenderThemeWin::paintTextField):
        (WebCore::RenderThemeWin::adjustTextAreaStyle):
        (WebCore::RenderThemeWin::paintTextArea):
        (WebCore::RenderThemeWin::createPopupMenu):
        * rendering/RenderThemeWin.h: Added.
        (WebCore::ThemeData::m_state):
        (WebCore::RenderThemeWin::supportsHover):
        (WebCore::RenderThemeWin::paintCheckbox):
        (WebCore::RenderThemeWin::paintRadio):

2006-08-15  Steve Falkenburg  <sfalken@apple.com>

        Pull TemporaryLinkStubs.cpp into internal tree to fix the build.

        * WebCore.vcproj/WebCore.vcproj:
        * platform/win/TemporaryLinkStubs.cpp: Added.
        (notImplemented):
        (FrameView::updateBorder):
        (FrameView::isFrameView):
        (PopUpButton::focusPolicy):
        (PopUpButton::populate):
        (Widget::enableFlushDrawing):
        (Widget::isEnabled):
        (Widget::focusPolicy):
        (Widget::disableFlushDrawing):
        (Widget::lockDrawingFocus):
        (Widget::unlockDrawingFocus):
        (JavaAppletWidget::JavaAppletWidget):
        (TextField::selectAll):
        (TextField::addSearchResult):
        (TextField::selectionStart):
        (TextField::hasSelectedText):
        (TextField::selectedText):
        (TextField::setAutoSaveName):
        (TextField::checksDescendantsForFocus):
        (TextField::setSelection):
        (TextField::setMaxResults):
        (TextField::edited):
        (Slider::Slider):
        (Slider::sizeHint):
        (Slider::setValue):
        (Slider::setMaxValue):
        (Slider::setMinValue):
        (Slider::~Slider):
        (Slider::setFont):
        (Slider::value):
        (ListBox::setSelected):
        (ListBox::sizeForNumberOfLines):
        (ListBox::isSelected):
        (ListBox::appendItem):
        (ListBox::doneAppendingItems):
        (ListBox::setWritingDirection):
        (ListBox::setEnabled):
        (ListBox::clear):
        (ListBox::checksDescendantsForFocus):
        (FileButton::FileButton):
        (FileButton::click):
        (FileButton::sizeForCharacterWidth):
        (FileButton::focusPolicy):
        (FileButton::frameGeometry):
        (FileButton::setFilename):
        (FileButton::baselinePosition):
        (FileButton::setFrameGeometry):
        (FileButton::setDisabled):
        (Slider::focusPolicy):
        (ListBox::focusPolicy):
        (TextField::focusPolicy):
        (Cursor::Cursor):
        (PlatformMouseEvent::PlatformMouseEvent):
        (WebCore::searchableIndexIntroduction):
        (WebCore::findNextSentenceFromIndex):
        (WebCore::findSentenceBoundary):
        (WebCore::findNextWordFromIndex):
        (WebCore::ServeSynchronousRequest):
        (FrameWin::focusWindow):
        (FrameWin::unfocusWindow):
        (FrameWin::locationbarVisible):
        (FrameWin::issueRedoCommand):
        (FrameWin::getObjectInstanceForWidget):
        (FrameWin::getEmbedInstanceForWidget):
        (FrameWin::canRedo):
        (FrameWin::canUndo):
        (FrameWin::registerCommandForRedo):
        (FrameWin::runJavaScriptPrompt):
        (FrameWin::shouldInterruptJavaScript):
        (FrameWin::openURL):
        (FrameWin::print):
        (FrameWin::getAppletInstanceForWidget):
        (FrameWin::passMouseDownEventToWidget):
        (FrameWin::issueCutCommand):
        (FrameWin::issueCopyCommand):
        (FrameWin::passWheelEventToChildWidget):
        (FrameWin::issueUndoCommand):
        (FrameWin::mimeTypeForFileName):
        (FrameWin::issuePasteCommand):
        (FrameWin::scheduleClose):
        (FrameWin::markMisspellings):
        (FrameWin::menubarVisible):
        (FrameWin::personalbarVisible):
        (FrameWin::statusbarVisible):
        (FrameWin::toolbarVisible):
        (FrameWin::issueTransposeCommand):
        (FrameWin::canPaste):
        (FrameWin::objectContentType):
        (FrameWin::canGoBackOrForward):
        (FrameWin::issuePasteAndMatchStyleCommand):
        (FrameWin::createPlugin):
        (BrowserExtensionWin::canRunModal):
        (BrowserExtensionWin::createNewWindow):
        (BrowserExtensionWin::canRunModalNow):
        (BrowserExtensionWin::runModal):
        (BrowserExtensionWin::goBackOrForward):
        (BrowserExtensionWin::historyURL):
        (GraphicsContext::addRoundedRectClip):
        (GraphicsContext::addInnerRoundedRectClip):
        (WebCore::screenDepthPerComponent):
        (WebCore::screenIsMonochrome):
        (WebCore::moveCursor):
        (WebCore::historyContains):
        (WebCore::submitButtonDefaultLabel):
        (WebCore::inputElementAltText):
        (WebCore::resetButtonDefaultLabel):
        (WebCore::defaultLanguage):
        (WebCore::findWordBoundary):
        (PlugInInfoStore::createPluginInfoForPluginAtIndex):
        (PlugInInfoStore::pluginCount):
        (WebCore::PlugInInfoStore::supportsMIMEType):
        (WebCore::refreshPlugins):
        (WebCore::ResourceLoader::assembleResponseHeaders):
        (WebCore::ResourceLoader::retrieveCharset):
        (FrameWin::restoreDocumentState):
        (FrameWin::partClearedInBegin):
        (FrameWin::createEmptyDocument):
        (FrameWin::overrideMediaType):
        (FrameWin::handledOnloadEvents):
        (FrameWin::markedTextRange):
        (FrameWin::passSubframeEventToSubframe):
        (FrameWin::lastEventIsMouseUp):
        (FrameWin::addMessageToConsole):
        (FrameWin::shouldChangeSelection):
        (FrameWin::respondToChangedSelection):
        (FrameWin::createFrame):
        (FrameWin::saveDocumentState):
        (FrameWin::registerCommandForUndo):
        (FrameWin::clearUndoRedoOperations):
        (FrameWin::incomingReferrer):
        (FrameWin::markMisspellingsInAdjacentWords):
        (FrameWin::respondToChangedContents):
        (BrowserExtensionWin::BrowserExtensionWin):
        (BrowserExtensionWin::setTypedIconURL):
        (BrowserExtensionWin::setIconURL):
        (BrowserExtensionWin::getHistoryLength):
        (WebCore::CheckIfReloading):
        (WebCore::CheckCacheObjectStatus):
        (Widget::setEnabled):
        (Widget::paint):
        (Widget::setIsSelected):
        (ScrollView::addChild):
        (ScrollView::removeChild):
        (ScrollView::scrollPointRecursively):
        (ScrollView::inWindow):
        (GraphicsContext::setShadow):
        (GraphicsContext::clearShadow):
        (GraphicsContext::beginTransparencyLayer):
        (GraphicsContext::endTransparencyLayer):
        (GraphicsContext::clearRect):
        (GraphicsContext::strokeRect):
        (GraphicsContext::setLineWidth):
        (GraphicsContext::setLineCap):
        (GraphicsContext::setLineJoin):
        (GraphicsContext::setMiterLimit):
        (GraphicsContext::setAlpha):
        (GraphicsContext::setCompositeOperation):
        (GraphicsContext::clip):
        (GraphicsContext::translate):
        (GraphicsContext::rotate):
        (GraphicsContext::scale):
        (Path::Path):
        (Path::~Path):
        (Path::contains):
        (Path::translate):
        (Path::boundingRect):
        (Path::operator=):
        (Path::clear):
        (Path::moveTo):
        (Path::addLineTo):
        (Path::addQuadCurveTo):
        (Path::addBezierCurveTo):
        (Path::addArcTo):
        (Path::closeSubpath):
        (Path::addArc):
        (Path::addRect):
        (Path::addEllipse):
        (TextField::TextField):
        (TextField::~TextField):
        (TextField::setFont):
        (TextField::setAlignment):
        (TextField::setWritingDirection):
        (TextField::maxLength):
        (TextField::setMaxLength):
        (TextField::text):
        (TextField::setText):
        (TextField::cursorPosition):
        (TextField::setCursorPosition):
        (TextField::setEdited):
        (TextField::setReadOnly):
        (TextField::setPlaceholderString):
        (TextField::setColors):
        (TextField::sizeForCharacterWidth):
        (TextField::baselinePosition):
        (TextField::setLiveSearch):
        (PopUpButton::PopUpButton):
        (PopUpButton::~PopUpButton):
        (PopUpButton::setFont):
        (PopUpButton::baselinePosition):
        (PopUpButton::setWritingDirection):
        (PopUpButton::clear):
        (PopUpButton::appendItem):
        (PopUpButton::setCurrentItem):
        (PopUpButton::sizeHint):
        (PopUpButton::frameGeometry):
        (PopUpButton::setFrameGeometry):
        (PlatformScrollBar::PlatformScrollBar):
        (PlatformScrollBar::~PlatformScrollBar):
        (PlatformScrollBar::width):
        (PlatformScrollBar::height):
        (PlatformScrollBar::setEnabled):
        (PlatformScrollBar::paint):
        (PlatformScrollBar::setScrollBarValue):
        (PlatformScrollBar::setKnobProportion):
        (PlatformScrollBar::setRect):
        (ScrollBar::ScrollBar):
        (ScrollBar::setSteps):
        (ScrollBar::scroll):
        (ScrollBar::setValue):
        (ScrollBar::setKnobProportion):
        (ListBox::ListBox):
        (ListBox::~ListBox):
        (ListBox::setSelectionMode):
        (ListBox::setFont):
        (WebCore::focusRingColor):
        (WebCore::setFocusRingColorChangeFunction):
        (Frame::setNeedsReapplyStyles):
        (Image::drawTiled):
        (RenderPopupMenuWin::~RenderPopupMenuWin):
        (RenderPopupMenuWin::clear):
        (RenderPopupMenuWin::populate):
        (RenderPopupMenuWin::showPopup):
        (RenderPopupMenuWin::addSeparator):
        (RenderPopupMenuWin::addGroupLabel):
        (RenderPopupMenuWin::addOption):
        (RenderThemeWin::paintMenuList):
        (RenderThemeWin::adjustMenuListStyle):
        (RenderThemeWin::systemFont):

2006-08-15  Steve Falkenburg  <sfalken@apple.com>

        Fix the build with TOT.

        * WebCore.vcproj/WebCore.vcproj:

2006-08-15  Steve Falkenburg  <sfalken@apple.com>

        Get this building.

        * WebCore.vcproj/WebCore.sln:
        * WebCore.vcproj/WebCore.vcproj:
        * WebCore.vcproj/build-generated-files.sh:

2006-08-15  Steve Falkenburg  <sfalken@apple.com>

        Initial check-in.

        * ChangeLog: Added.
        * WebCore.vcproj/WebCore.sln: Added.
        * WebCore.vcproj/WebCore.vcproj: Added.
        * WebCore.vcproj/build-generated-files.sh: Added.
        * bridge/win/FrameWin.cpp: Added.
        (WebCore::FrameWin::FrameWin):
        (WebCore::FrameWin::~FrameWin):
        (WebCore::FrameWin::urlSelected):
        (WebCore::FrameWin::submitForm):
        (WebCore::FrameWin::userAgent):
        (WebCore::FrameWin::runJavaScriptAlert):
        (WebCore::FrameWin::runJavaScriptConfirm):
        (WebCore::FrameWin::keyPress):
        (WebCore::FrameWin::setTitle):
        (WebCore::FrameWin::setStatusBarText):
        (WebCore::FrameWin::textFieldDidBeginEditing):
        (WebCore::FrameWin::textFieldDidEndEditing):
        (WebCore::FrameWin::textDidChangeInTextField):
        (WebCore::FrameWin::doTextFieldCommandFromEvent):
        (WebCore::FrameWin::textWillBeDeletedInTextField):
        (WebCore::FrameWin::textDidChangeInTextArea):
        * bridge/win/FrameWin.h: Added.
        (WebCore::Win):
        * platform/win/ResourceLoaderWin.cpp: Added.
        (WebCore::addToOutstandingJobs):
        (WebCore::removeFromOutstandingJobs):
        (WebCore::lookupResourceLoader):
        (WebCore::ResourceLoaderWndProc):
        (WebCore::initializeOffScreenResourceLoaderWindow):
        (WebCore::ResourceLoaderInternal::~ResourceLoaderInternal):
        (WebCore::ResourceLoader::~ResourceLoader):
        (WebCore::transferJobStatusCallback):
        (WebCore::ResourceLoader::start):
        (WebCore::ResourceLoader::fileLoadTimer):
        (WebCore::ResourceLoader::cancel):
        * platform/win/ResourceLoaderWin.h: Added.
